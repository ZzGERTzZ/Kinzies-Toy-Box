<body><table width=1024><tr><td colspan="3"><font size=4 face="times new roman"><b>patrol</b>(<i>function_name</i>, <i>npc_name</i>)</font></td></tr><tr><td colspan="3"><hr align=left noshade size=3></td></tr><tr><td colspan="3"><font size=3 face="times new roman"><b>Parameters:</b></font></td></tr><tr><td valign="top" width="15%"><font size=3 face="times new roman"><i>function_name</i></font></td><td width="2%">&nbsp;</td><td width="83%"><font size=3 face="times new roman">(string) name of the function</font></td></tr><tr><td valign="top" width="15%"><font size=3 face="times new roman"><i>npc_name</i></font></td><td width="2%">&nbsp;</td><td width="83%"><font size=3 face="times new roman">(string) name of the NPC</font></td></tr><tr><td colspan="3">&nbsp;</td></tr><tr><td colspan="3"><font size=3 face="times new roman"><b>Returns:</b></font></td></tr><tr><td colspan="3"><font size=3 face="times new roman">(integer) handle of the patrol thread, or -1 if an error occurred</font></td></tr><tr><td colspan="3"><hr align=left noshade size=1></td></tr><tr><td colspan="3"><font size=3 face="times new roman"><b>Description:</b></font></td></tr><tr><td colspan="3"><font size=2 face="courier new">Execute a function as a patrol thread for an NPC.<p>When this script action is calle,d the function is executed immediately in a new thread, with the character's name passed as a parameter.<p>The patrol thread may be temporarily paused in certain situations, such as if the character attacks someone else. If the character is killed or otherwise removed from the game, the patrol thread is killed. Also, if for any reason, the patrol thread is killed, it will not be re-started.<p>Note that, although this script action is primarily intended for setting up patrol routes, it can also be used to execute any character-related function. The term "patrol" is used loosely here.<p>Patrols cannot be registered to the player character.<p>Example:<p>&nbsp;&nbsp;&nbsp;function do_patrol(name)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local route = {"nav00", "nav01", "nav02", "nav03"}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local i = 1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (1) do<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move_to(name, route[i])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i = i + 1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (i > 4) then<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i = 1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br>&nbsp;&nbsp;&nbsp;end<p>&nbsp;&nbsp;&nbsp;patrol("do_patrol", "Guard#000")<p>Associates the function, do_patrol(), with the character named, "Guard#000". The function is executed immediately in a new thread. The string, "Guard#000", is passed to do_patrol() as a parameter.</font></td></tr><tr><td colspan="3">&nbsp;</td></tr><tr><td colspan="3"><hr align=left noshade size=2></td></tr><tr><td valign=top><font size=3 face="times new roman"><a href="_script_actions_index.html">back to index</a></font></td><td align=right colspan="2"><font size=2 face="calibri"><b>SR3 Script Action Documentation</b><br><i>Last updated: Tue, 09 Aug 2011 11:32:15</i></font></td></tr></table></body>